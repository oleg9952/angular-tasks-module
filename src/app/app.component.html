<div class="wrapper">
  <form class="form"
    [formGroup]="form"
    (ngSubmit)="submitForm()"
  >
    <h1>Form</h1>
    <div class="form__body">
      <div class="form__section">
        <label for="name">Name:</label>
        <input 
          type="text" 
          id="name"
          formControlName="name"
          autocomplete="off"
        >
        <div *ngIf="form.get('name').touched && form.get('name').invalid">
          <p 
            class="error__message"
            *ngIf="form.get('name').errors.required"
          >Name is required!</p>
          <p 
            class="error__message"
            *ngIf="form.get('name').errors.prohibitedName"
          >You can not use this name!</p>
          <p 
            class="error__message"
            *ngIf="form.get('name').errors.prohibitedNameAsync"
          >You can not use this name! || Async</p>
        </div>
        <div class="validation"></div>
      </div>

      <div class="form__section">
        <label for="email">Email:</label>
        <input 
          type="email" 
          id="email"
          formControlName="email"
        >
        <div *ngIf="form.get('email').touched && form.get('email').invalid">
          <p class="error__message"
            *ngIf="form.get('email').errors.required"
          >Email is required!</p>
          <p class="error__message"
            *ngIf="form.get('email').errors.email"
          >Wrong email!</p>
        </div>
      </div>

      <div class="form__section">
        <label for="framework">Framework:</label>
        <select name="framework" id="framework"
          formControlName="framework"
        >
          <option value="angular">Angular</option>
          <option value="react">React</option>
          <option value="vue">Vue</option>
        </select>
      </div>

      <button type="button" (click)="onAddFramework()">Add Framework</button>

      <div formArrayName="otherFrameworks">
        <div class="form__section dynamic"
          *ngFor="let control of controls; let i = index"
        >
          <input 
            type="text"
            placeholder="Type in your Framework..."
            [formControlName]="i"
          >
          <div *ngIf="control.touched && control.invalid">
            <p class="error__message"
              >This field can't be empty!</p>
          </div>
        </div>
      </div>
      
    </div>
    <button 
      type="submit" 
      class="submit__btn"
      [disabled]="!form.valid || form.pending"
    >Submit</button>
  </form>
</div>